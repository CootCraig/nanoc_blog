<!DOCTYPE html>
<head>
  <meta charset='utf-8'>
  <title>
    Nanoc Blog
  </title>
  <link href='/stylesheet.css' rel='stylesheet'>
</head>
<body>
  <div id='banner'>
    Cootcraig Public Blog
  </div>
  <div id='main'>
    <div class='post'>
      <h1>Logitech Trackman Marble</h1>
      <div>
        <span>Post tags:</span>
        |
        <span><a href="/tags/trackball">trackball</a></span>
        |
        <span><a href="/tags/trackman">trackman</a></span>
        |
      </div>
      <article>
        
        <h1 id="log">Log</h1>
        
        <h3 id="marble-mouse-basic-function-from-archlinuxhttpswikiarchlinuxorgindexphplogitechmarblemouse"><a href="https://wiki.archlinux.org/index.php/Logitech_Marble_Mouse">Marble mouse basic function from archlinux</a></h3>
        
        <p><img src="/assets/images/basic-function-logitech-marble-mouse.png" /></p>
        
        <h3 id="where-to-put-xinput-set-script">Where to put xinput set script</h3>
        
        <p>Note that lightdm is already running an xrandr script.
        We can add our Logitech Trackman Marble setup in the same place.</p>
        
        <pre><code>/etc/lightdm/lightdm.conf
         ...
        session-setup-script=/usr/local/share/lightdm/ivie2.sh
         ...
        </code></pre>
        
        <pre><code>/usr/local/share/lightdm/ivie2.sh
        xrandr --output HDMI3 ...
         ... Here.
        </code></pre>
        
        <h3 id="and-the-xinput-commands">And the xinput commands</h3>
        
        <ul>
          <li>Scroll-click is right small button</li>
          <li>Scroll emulation is left small button</li>
        </ul>
        
        <pre><code>xinput commands
        xinput --set-button-map "Logitech USB Trackball" 1 9 3 4 5 6 7 8 2
        xinput set-int-prop "Logitech USB Trackball" "Evdev Wheel Emulation" 8 1 
        xinput set-int-prop "Logitech USB Trackball" "Evdev Wheel Emulation Button" 8 8
        xinput set-int-prop "Logitech USB Trackball" "Evdev Wheel Emulation Axes" 8 6 7 4 5 
        </code></pre>
        
        <h1 id="notes">Notes</h1>
        
        <h3 id="sasha-shepherd---askubuntu---trackman-scripthttpaskubuntucomquestions66253how-to-configure-logitech-marble-trackball"><a href="http://askubuntu.com/questions/66253/how-to-configure-logitech-marble-trackball">Sasha Shepherd - askubuntu - trackman script</a></h3>
        
        <pre><code>Sasha Shepherd - askubuntu - trackman script
        xinput set-button-map "Logitech USB Trackball" 1 2 3 4 5 6 7 8 9 
        xinput set-int-prop "Logitech USB Trackball" "Evdev Wheel Emulation Button" 8 8 
        xinput set-int-prop "Logitech USB Trackball" "Evdev Wheel Emulation" 8 1 
        xinput set-int-prop "Logitech USB Trackball" "Evdev Wheel Emulation Axes" 8 6 7 4 5 
        xinput set-int-prop "Logitech USB Trackball" "Evdev Wheel Emulation X Axis" 8 6 
        xinput set-int-prop "Logitech USB Trackball" "Evdev Drag Lock Buttons" 8 9
        </code></pre>
        
        <pre><code>xinput list
        ⎡ Virtual core pointer                    	id=2	[master pointer  (3)]
        ⎜   ↳ Virtual core XTEST pointer              	id=4	[slave  pointer  (2)]
        ⎜   ↳ Logitech USB Trackball                  	id=11	[slave  pointer  (2)]
        </code></pre>
        
        <pre><code>xinput query-state 'Logitech USB Trackball'
        2 classes :
        ButtonClass
        	button[1]=up
        	button[2]=up
        	button[3]=up
        	button[4]=up
        	button[5]=up
        	button[6]=up
        	button[7]=up
        	button[8]=up
        	button[9]=up
        ValuatorClass Mode=Relative Proximity=In
        	valuator[0]=1548
        	valuator[1]=688
        </code></pre>
        
        <pre><code>xinput list-props 'Logitech USB Trackball'
        Device 'Logitech USB Trackball':
        	Device Enabled (129):	1
        	Coordinate Transformation Matrix (131):	1.000000, 0.000000, 0.000000, 0.000000, 1.000000, 0.000000, 0.000000, 0.000000, 1.000000
        	Device Accel Profile (253):	0
        	Device Accel Constant Deceleration (254):	1.000000
        	Device Accel Adaptive Deceleration (255):	1.000000
        	Device Accel Velocity Scaling (256):	10.000000
        	Device Product ID (247):	1133, 50184
        	Device Node (248):	"/dev/input/event15"
        	Evdev Axis Inversion (257):	0, 0
        	Evdev Axes Swap (259):	0
        	Axis Labels (260):	"Rel X" (139), "Rel Y" (140)
        	Button Labels (261):	"Button Left" (132), "Button Middle" (133), "Button Right" (134), "Button Wheel Up" (135), "Button Wheel Down" (136), "Button Horiz Wheel Left" (137), "Button Horiz Wheel Right" (138), "Button Side" (251), "Button Extra" (252)
        	Evdev Scrolling Distance (262):	0, 0, 0
        	Evdev Middle Button Emulation (263):	0
        	Evdev Middle Button Timeout (264):	50
        	Evdev Third Button Emulation (265):	0
        	Evdev Third Button Emulation Timeout (266):	1000
        	Evdev Third Button Emulation Button (267):	3
        	Evdev Third Button Emulation Threshold (268):	20
        	Evdev Wheel Emulation (269):	0
        	Evdev Wheel Emulation Axes (270):	0, 0, 4, 5
        	Evdev Wheel Emulation Inertia (271):	10
        	Evdev Wheel Emulation Timeout (272):	200
        	Evdev Wheel Emulation Button (273):	4
        	Evdev Drag Lock Buttons (274):	0
        </code></pre>
        
        <pre><code>Logitech Marble has 4 buttons. xmodmap has 1-9 positions, 1-8 functional
        ! Logitech USB Marble Mouse Physical buttons available: 
        !  Mouse Big:   1 3
        !  Mouse Small: 8 9
        ! Xmodmap positional meanings:
        !  Pointer: Left-click, Middle-click, Right-click, Scroll-up, Scroll-down, Scroll-left, Scroll-right, Scroll-click, 9
        pointer = 1 9 3 4 5 6 7 8 2
        </code></pre>
        
        <pre><code>ID     	Hardware Action     	Result                
        1 	Large button left 	normal click
        2 	Both large buttons 	middle-click  
        3 	Large button right 	right-click
        4 	(not a button) 	-
        5 	(not a button) 	-
        6 	(not a button) 	-
        7 	(not a button) 	-
        8 	Small button left 	browser back
        9 	Small button right 	browser forward 
        
        Both large buttons pressed simultaneously creates a middle-click.
        The simultaneous click is enabled by a configuration directive. It requires Emulate3buttons. 
        </code></pre>
        
        <h2 id="ubuntu-community---logitechmarblemouseusbhttpshelpubuntucomcommunitylogitechmarblemouseusb"><a href="https://help.ubuntu.com/community/Logitech_Marblemouse_USB">ubuntu community - Logitech_Marblemouse_USB</a></h2>
        
        <pre><code>Alternative: apply settings via xinput
        xinput set-button-map "Logitech USB Trackball" 1 2 3 4 5 6 7 8 9
        xinput set-int-prop "Logitech USB Trackball" "Evdev Wheel Emulation Button" 8 8
        xinput set-int-prop "Logitech USB Trackball" "Evdev Wheel Emulation" 8 1
        xinput set-int-prop "Logitech USB Trackball" "Evdev Wheel Emulation Axes" 8 6 7 4 5
        xinput set-int-prop "Logitech USB Trackball" "Evdev Wheel Emulation X Axis" 8 6
        xinput set-int-prop "Logitech USB Trackball" "Evdev Drag Lock Buttons" 8 9
        
          You can check what you have made via:
        xinput list-props "Logitech USB Trackball"
        </code></pre>
        
        <h2 id="xorg---evdev---generic-linux-input-driverhttpwwwxorgarchivex11r75docmanman4evdev4html"><a href="http://www.x.org/archive/X11R7.5/doc/man/man4/evdev.4.html">x.org - evdev - Generic Linux input driver</a></h2>
        
        <h1 id="x-tools">x tools</h1>
        
        <ul>
          <li>Package: xinput (1.6.1-1) </li>
          <li>Package: xautomation (1.09-1) </li>
          <li>Package: xbindkeys (1.8.6-1) </li>
        </ul>
        
        <h1 id="research">Research</h1>
        
        <ul>
          <li><a href="http://blog.karssen.org/2010/09/11/linux-the-logitech-trackman-marble-and-emulating-a-scroll-wheel/">Lennart’s weblog - Logitech Trackman Marble emulating scroll wheel</a></li>
          <li><a href="http://superuser.com/questions/374504/configure-a-trackball-under-linux-without-editing-xorg-conf">superuser - Configure a trackball under Linux</a></li>
          <li><a href="https://help.ubuntu.com/community/Logitech_Marblemouse_USB">ubuntu community - Logitech_Marblemouse_USB</a></li>
          <li><a href="https://wiki.archlinux.org/index.php/Logitech_Marble_Mouse">archlinux - Logitech Marble Mouse</a></li>
          <li><a href="http://askubuntu.com/questions/66253/how-to-configure-logitech-marble-trackball">ubuntu questions - How to configure Logitech Marble trackball</a></li>
          <li><a href="http://www.robmeerman.co.uk/unix/xinput">RobMerrman - XInput: Scroll-Wheel Emulation on a 4-button Marble Mouse</a></li>
          <li><a href="http://unix.stackexchange.com/questions/30401/is-there-a-way-to-control-the-mouse-wheel-resolution-in-debian">stackexchange - control the mouse wheel resolution in Debian?</a></li>
        </ul>
      </article>
    </div>
  </div>
  <div id='sidebar'>
    <ul>
      <li><a href="/">Main</a></li>
      <li><a href="/post_index/">Posts</a></li>
      <li><a href="/tag_index/">Tags</a></li>
    </ul>
  </div>
</body>
