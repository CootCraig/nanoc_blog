<!DOCTYPE html>
<head>
  <meta charset='utf-8'>
  <title>
    Nanoc Blog
  </title>
  <link href='/stylesheet.css' rel='stylesheet'>
</head>
<body>
  <div id='banner'>
    Cootcraig Public Blog
  </div>
  <div id='main'>
    <div class='post'>
      <h1>Virtualbox</h1>
      <div>
        <span>Post tags:</span>
        |
        <span><a href="/tags/virtualbox">virtualbox</a></span>
        |
      </div>
      <article>
        
        <h1 id="start-virtualbox-guest-at-boot">Start Virtualbox Guest at boot</h1>
        
        <h4 id="forumsvirtualboxorg---start-vms-at-boot-new-in-420httpsforumsvirtualboxorgviewtopicphpf11t51529"><a href="https://forums.virtualbox.org/viewtopic.php?f=11&amp;t=51529">forums.virtualbox.org - Start VMs at boot (new in 4.2.0)</a></h4>
        
        <h2 id="vmhost01-at-gcs">vmhost01 at GCS</h2>
        
        <p>First you need to create the file /etc/default/virtualbox and add a
        few variables.</p>
        
        <pre><code>/etc/default/virtualbox
        VBOXAUTOSTART_DB=/etc/vbox
        VBOXAUTOSTART_CONFIG=/etc/vbox/autostart.conf
        </code></pre>
        
        <pre><code>/etc/vbox/autostart.conf 
        default_policy = deny
        
        administrator = {
          allow = true
          startup_delay = 10
        }
        
        craig = {
          allow = true
          startup_delay = 30
        }
        </code></pre>
        
        <p>Set permissions on directory to the vboxuser group and make sure users
        can write to the directory as well as sticky bit.</p>
        
        <pre><code>Set permissions and mode on /etc/vbox
        chgrp vboxusers /etc/vbox
        chmod 1775 /etc/vbox
        
        ls -ld /etc/vbox
        drwxrwxr-t 2 root vboxusers 4096 Sep  3 18:17 /etc/vbox
        </code></pre>
        
        <p>Add administrator to the vboxusers group.</p>
        
        <pre><code>Add administrator to the vboxusers group.
        groups administrator
        administrator : administrator sudo
        
        usermod -a -G vboxusers administrator
        
        groups administrator
        administrator : administrator sudo vboxusers
        </code></pre>
        
        <p>Every user who wants to enable autostart for individual machines has to
        set the path to the autostart database directory with</p>
        
        <pre><code>VBoxManage setproperty autostartdbpath /etc/vbox
        </code></pre>
        
        <pre><code>vboxmanage list vms
        "MineOS" {c5869f0e-0d82-4f92-8ba3-61401e5f9289}
        "chadeb01" {fc587445-f925-46e7-a2f7-35c50598c2b8}
        "chawindows2008r2" {535ba7af-0d5d-4007-bad6-7ec37b7d1c3d}
        "debxtest" {e6d55e7a-4d07-4707-a8e7-32942e674679}
        "chapg" {98d06bc6-17b3-4187-94e3-65b15e461a18}
        "Gitlab" {6d6d0634-6979-4b52-851d-cc44f08cbe99}
        "FOG" {c8fd1830-2165-4246-8219-35d06b15dbc3}
        </code></pre>
        
        <pre><code>Enable autostart with vboxmanage
        VBoxManage startvm Gitlab --type headless
        VBoxManage modifyvm Gitlab --autostart-enabled on
        service vboxautostart-service restart
        </code></pre>
        
        <pre><code>update-rc.d virtualbox defaults
        </code></pre>
        
        <pre><code>vboxmanage showvminfo --details Gitlab
         ...
        Autostart Enabled: off
        Autostart Delay: 0
         ...
        </code></pre>
      </article>
    </div>
  </div>
  <div id='sidebar'>
    <ul>
      <li><a href="/">Main</a></li>
      <li><a href="/post_index/">Posts</a></li>
      <li><a href="/tag_index/">Tags</a></li>
    </ul>
  </div>
</body>
