<!DOCTYPE html>
<head>
  <meta charset='utf-8'>
  <title>
    Nanoc Blog
  </title>
  <link href='/stylesheet.css' rel='stylesheet'>
</head>
<body>
  <div id='banner'>
    Cootcraig Public Blog
  </div>
  <div id='main'>
    <div class='post'>
      <h1>OpenMediaVault NAS</h1>
      <div>
        <span>Post tags:</span>
        |
        <span><a href="/tags/mpd">mpd</a></span>
        |
        <span><a href="/tags/nas">nas</a></span>
        |
        <span><a href="/tags/rune_audio">rune_audio</a></span>
        |
      </div>
      <article>
        
        <h1 id="openmediavaulthttpwwwopenmediavaultorg"><a href="http://www.openmediavault.org/">OpenMediaVault</a></h1>
        
        <p>OpenMediaVault is the next generation network attached storage
        (NAS) solution based on Debian Linux. It contains services like SSH,
        (S)FTP, SMB/CIFS, DAAP media server, RSync, BitTorrent client and many
        more. Thanks to the modular design of the framework it can be enhanced
        via plugins.</p>
        
        <p>OpenMediaVault is primarily designed to be used in home environments
        or small home offices, but is not limited to those scenarios. It is a
        simple and easy to use out-of-the-box solution that will allow everyone
        to install and administrate a Network Attached Storage without deeper
        knowledge.</p>
        
        <h2 id="installation-wiki-page">Installation Wiki Page</h2>
        
        <ul>
          <li><a href="http://sourceforge.net/projects/openmediavault/files/0.5.48/">0.5.48 i386.iso download</a></li>
          <li><a href="http://wiki.openmediavault.org/index.php?title=Installation">Installation Notes</a></li>
        </ul>
        
        <h3 id="minimum-requirements">Minimum Requirements</h3>
        
        <ul>
          <li>i486 or amd64 platform</li>
          <li>1 GiB RAM</li>
          <li>2 GiB HDD/DOM/CF/USB Thumb Drive used as OpenMediaVault system drive.</li>
          <li>NOTE: The entire disk is used as system disk. The disk can not be used to store user data.</li>
          <li>1 HDD for data storage</li>
        </ul>
        
        <h3 id="services">Services</h3>
        
        <ul>
          <li>SSH</li>
          <li>FTP</li>
          <li>TFTP</li>
          <li>NFS (v3/v4)</li>
          <li>SMB/CIFS</li>
          <li>RSync</li>
        </ul>
        
        <h3 id="login-information">Login information</h3>
        
        <p>Once you have installed the system, these are the default access credentials.</p>
        
        <h4 id="webgui">WebGUI</h4>
        
        <ul>
          <li>User: admin</li>
          <li>Password: openmediavault</li>
        </ul>
        
        <h4 id="client-ssh-console">Client (SSH, console)</h4>
        
        <ul>
          <li>User: root</li>
          <li>Password: set during installation</li>
        </ul>
        
        <h2 id="installation-log">Installation log</h2>
        
        <h3 id="back-up-external-usb-drive-from-previous-freenas">Back up external USB drive from previous FreeNAS</h3>
        
        <p>I was unable to read the FreeNAS ufs drive on Ubuntu and gave up.</p>
        
        <h3 id="boot-the-install-cd-and-proceed">Boot the install CD and proceed</h3>
        
        <ul>
          <li>openmediavault_0.5.48_i386.iso</li>
        </ul>
        
        <p>This fails to boot on the Dell Optiplex P4.
        Fix is to disable serial in Bios settings.</p>
        
        <p>Use SystemRecueCd to wipe partitions on HD.</p>
        
        <h3 id="openmediavault-forum---found-instruction-on-loading-developer-version">OpenMediaVault forum - found instruction on loading developer version</h3>
        
        <h3 id="config-details">Config Details</h3>
        
        <p>Add my user to ssh group to allow ssh sessions.</p>
        
        <pre><code>
         # usermod -a -G ssh 
        </code></pre>
        
        <p>Desktop side.  Entry in /etc/fstab</p>
        
        <pre><code>
         //192.168.88.209/media /media/nas1 cifs rw,noperm,noauto,credentials=/home/craig/nas1_craig.txt,uid=craig,sec=ntlmv2 0 0
        </code></pre>
        
        <p>Desktop side.  Contents of ~/nas1_craig.txt</p>
        
        <pre><code>
         username=manager
         password=ThePassword
         domain=WORKGROUP
        </code></pre>
        
        <p>Server side</p>
        
        <pre><code>
         # ls -l /media/6a0bb210-b0fe-46eb-bd64-d5ba0dfab140/
         drwxr-s--- 2 manager users  4096 Jul  7 14:09 Media
        </code></pre>
        
        <p>/etc/samba/smb.conf</p>
        
        <pre><code>
          #======================= Global Settings =======================
          [global]
          workgroup = WORKGROUP
          server string = %h server
          dns proxy = no
          log level = 0
          syslog = 0
          log file = /var/log/samba/log.%m
          max log size = 1000
          syslog only = yes
          panic action = /usr/share/samba/panic-action %d
          encrypt passwords = true
          passdb backend = tdbsam
          obey pam restrictions = yes
          unix password sync = no
          passwd program = /usr/bin/passwd %u
          passwd chat = *Enter\snew\s*\spassword:* %n\n *Retype\snew\s*\spassword:* %n\n *password\supdated\ssuccessfully* .
          pam password change = yes
          socket options = TCP_NODELAY IPTOS_LOWDELAY
          guest account = nobody
          load printers = no
          disable spoolss = yes
          printing = bsd
          printcap name = /dev/null
          unix extensions = yes
          wide links = no
          create mask = 0777
          directory mask = 0777
          use sendfile = yes
          aio read size = 16384
          aio write size = 16384
          null passwords = no
          local master = yes
          time server = no
          wins support = no
          map untrusted to domain = yes
          
          #======================= Share Definitions =======================
          [Media]
          comment = Nas1 Media Share
          path = /media/6a0bb210-b0fe-46eb-bd64-d5ba0dfab140//Media
          guest ok = no
          read only = no
          browseable = yes
          inherit acls = yes
          inherit permissions = no
          ea support = no
          store dos attributes = no
          printable = no
          create mask = 0755
          force create mode = 0644
          directory mask = 0755
          force directory mode = 0755
          hide dot files = yes
          valid users = "manager","player",@"player"
          invalid users = 
          read list = "player",@"player"
          write list = "manager"
        </code></pre>
      </article>
    </div>
  </div>
  <div id='sidebar'>
    <ul>
      <li><a href="/">Main</a></li>
      <li><a href="/post_index/">Posts</a></li>
      <li><a href="/tag_index/">Tags</a></li>
    </ul>
  </div>
</body>
