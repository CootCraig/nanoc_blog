<!DOCTYPE html>
<head>
  <meta charset='utf-8'>
  <title>
    Nanoc Blog
  </title>
  <link href='/stylesheet.css' rel='stylesheet'>
</head>
<body>
  <div id='banner'>
    Cootcraig Public Blog
  </div>
  <div id='main'>
    <div class='post'>
      <h1>Arduino IDE</h1>
      <div>
        <span>Post tags:</span>
        |
        <span><a href="/tags/arduino">arduino</a></span>
        |
        <span><a href="/tags/arduino_ide">arduino_ide</a></span>
        |
      </div>
      <article>
        
        <h1 id="makefile-alternative-to-arduino-ide">Makefile alternative to Arduino IDE</h1>
        
        <p>I am goint to try out the Github Makefile project for Arduino from
        Sudar Muthu</p>
        
        <h2 id="a-makefile-for-arduino-sketches---managed-by-sudar-muthu">A Makefile for Arduino Sketches - managed by Sudar Muthu</h2>
        
        <ul>
          <li><a href="https://github.com/sudar/Arduino-Makefile">Sudar Muthu - A Makefile for Arduino Sketches</a></li>
        </ul>
        
        <p>This is a very simple Makefile which knows how to build Arduino
        sketches. It defines entire workflows for compiling code, flashing it
        to Arduino and even communicating through Serial monitor. You don’t need
        to change anything in the Arduino sketches.</p>
        
        <h3 id="installation-options">Installation Options</h3>
        
        <h4 id="through-package">Through package</h4>
        
        <p>If you’re using FreeBSD, Debian or Ubuntu, you can find this in the
        arduino-mk package and can be installed using apt-get or aptitude.</p>
        
        <h4 id="from-source">From source</h4>
        
        <p>Download the latest release</p>
        
        <p>Or clone it from Github using the command git clone 
        <a href="git@github.com:sudar/Arduino-Makefile.git">Github Repo</a></p>
        
        <h3 id="sudar-muthu">Sudar Muthu</h3>
        
        <ul>
          <li><a href="http://sudarmuthu.com/">Sudar Muthu - Night Dreaming (by Sudar)</a></li>
        </ul>
        
        <p>Night Dreaming (by Sudar) WordPress, JavaScript, Android, Arduino and some random stuff</p>
        
        <p>Hello and Welcome</p>
        
        <p>I am Sudar and this is my personal site. It serves as a starting point
        for most of the information I have put on the web. I started this site
        as a hobby so that I can return back what I can to this online world from
        where I have learned and still learning so many things. Have a nice sta</p>
        
        <ul>
          <li><a href="http://sudarmuthu.com/blog/why-you-should-open-source-your-next-pet-project/">Sudar Muthu - Why you should open source your next pet project</a></li>
        </ul>
        
        <h3 id="features">Features</h3>
        
        <ul>
          <li>Very robust</li>
          <li>Highly customizable</li>
          <li>Supports all official AVR-based Arduino boards</li>
          <li>Supports chipKIT</li>
          <li>Works on all three major OS (Mac, Linux, Windows)</li>
          <li>Auto detects serial baud rate and libraries used</li>
          <li>Support for *.ino and *.pde sketches as well as raw *.c and *.cpp</li>
          <li>Support for Arduino Software versions 1.0.x as well as 0.x. Support for Arduino 1.5.x is still work in progress</li>
          <li>Automatic dependency tracking. Referred libraries are automatically included in the build process. Changes in *.h files lead to recompilation of sources which include them</li>
        </ul>
        
        <h3 id="article--guide---compiling-arduino-sketches-using-makefilehttphardwarefuncomtutorialscompiling-arduino-sketches-using-makefile"><a href="http://hardwarefun.com/tutorials/compiling-arduino-sketches-using-makefile">Article / guide - Compiling Arduino sketches using Makefile</a></h3>
        
        <p>One of the main reasons why Arduino is very popular with beginners is that
        it is completely self-contained which makes it very easy to use. Once you
        have an Arduino board, all you have to do is to download the software
        and within minutes you can make your first led blink. The software has
        everything you need right from the IDE, to the compiler and even serial
        monitor to communicate with Arduino, all within one single package.</p>
        
        <p>While the Arduino IDE is very good for beginners, you might start to
        feel its limitations, once you start working with it regularly. I use
        vim for everything and always wished writing Arduino sketches in vim.</p>
        
        <p>I configured Arduino IDE, to use an external editor and started using
        vim to write code and then Arduino IDE to compile and upload. While this
        worked for sometime, I started to feel the need for a proper makefile
        so that I can do everything from vim itself.</p>
        
        <h2 id="my-setup-and-use-log">My Setup and Use Log</h2>
        
        <h3 id="get-the-linux-tarball">Get the Linux tarball.</h3>
        
        <p><a href="http://arduino.googlecode.com/files/arduino-1.0.5-linux64.tgz">Linux tarball</a></p>
        
        <pre><code>
        lug$ cd /opt/Arduino
        log$ wget http://arduino.googlecode.com/files/arduino-1.0.5-linux64.tgz
        lug$ tar xzf arduino-1.0.5-linux64.tgz
        lug$ ln -s arduino-1.0.5 arduino
        lug$ ls -l
        lrwxrwxrwx 1 craig craig       13 Mar 23 14:45 arduino -&gt; arduino-1.0.5
        drwxr-xr-x 8 craig craig     4096 May 17  2013 arduino-1.0.5
        </code></pre>
        
        <h3 id="install-dependencies">Install dependencies</h3>
        
        <p>The Makefile delegates resetting the board to a short Perl
        program. You’ll need to install Device::SerialPort and YAML library.</p>
        
        <p>On Debian or Ubuntu:</p>
        
        <pre><code>
        apt-get install libdevice-serialport-perl
        apt-get install libyaml-perl
        </code></pre>
        
        <h3 id="clone-arduino-makefile-from-github">Clone Arduino-Makefile from github</h3>
        
        <p>I forked Arduino-Makefile from sudar.</p>
        
        <pre><code>
        $ mkdir /opt/sudar; cd /opt/sudar
        $ git clone git@github.com:CootCraig/Arduino-Makefile.git
        $ cd /opt/sudar/Arduino-Makefile
        </code></pre>
        
        <p>Pull in upstream changes</p>
        
        <pre><code>
        $ git remote add upstream https://github.com/sudar/Arduino-Makefile.git
        $ git fetch upstream
        $ git merge upstream/master
        </code></pre>
        
        <p>Set up git branches for craig local working changes.
        Leave master as copy of upsteam.</p>
        
        <pre><code>
         $ git checkout -b craig
         Switched to a new branch 'craig'
         craig@lug:/opt/sudar/Arduino-Makefile$ git branch
         * craig
           master
         $ git checkout -b craig-develop
         Switched to a new branch 'craig-develop'
         $ git branch
           craig
         * craig-develop
           master
        </code></pre>
        
        <h3 id="setup-environment-variables">Setup environment variables</h3>
        
        <p>What are the avr packages.</p>
        
        <pre><code>
        $ dpkg --get-selections |grep avr
        avr-libc					install
        avrdude						install
        binutils-avr					install
        gcc-avr						install
        </code></pre>
        
        <p>Where are the avr files.</p>
        
        <pre><code>
        /usr/bin/avr-g++
        /usr/bin/avrdude
        /usr/lib/avr/lib/libc.a
        /usr/lib/avr/bin/ar
        /usr/lib/gcc/avr/4.7.2/
        </code></pre>
        
        <p>~/.profile</p>
        
        <pre><code>
        export ARDUINO_DIR=/opt/arduino/arduino
        export ARDMK_DIR=/opt/sudar/Arduino-Makefile
        export AVR_TOOLS_DIR=/usr
        </code></pre>
        
        <h3 id="example-sketch-makefile">Example sketch Makefile</h3>
        
        <pre><code>
        /opt/sudar/Arduino-Makefile/Arduino.mk
        </code></pre>
        
        <p>Per sketch variables</p>
        
        <p>After the global settings, you will need to specify the following variables for each sketch</p>
        
        <p>BOARD_TAG – The Arduino board that you are using. By default Uno is used
        ARDUINO_PORT – The serial port where Arduino is connected
        ARDUINO_LIBS – Space separated set of libraries that are used by your sketch</p>
      </article>
    </div>
  </div>
  <div id='sidebar'>
    <ul>
      <li><a href="/">Main</a></li>
      <li><a href="/post_index/">Posts</a></li>
      <li><a href="/tag_index/">Tags</a></li>
    </ul>
  </div>
</body>
