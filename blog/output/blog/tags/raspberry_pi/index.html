<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <title>
      Coot Craig Blog
      Tag: raspberry_pi
    </title>
    <link href='/assets/app.css' rel='stylesheet'>
    <script src='/assets/modernizr.js'></script>
    <script src='/assets/jquery-2.0.3.min.js'></script>
    <script src='/assets/foundation.js'></script>
    <script src='/assets/foundation.topbar.js'></script>
  </head>
  <body>
    <div class='header'>
      <div class='contain-to-grid'>
        <nav class='top-bar'>
          <ul class='title-area'>
            <li class='name'>
              <a href='/'>Coot Craig Blog</a>
            </li>
            <li class='toggle-topbar menu-icon'>
              <a href='#'>
                <span>Menu</span>
              </a>
            </li>
          </ul>
          <section class='top-bar-section'>
            <ul class='left'></ul>
            <ul class='right'>
              <li>
                <a href='/blog/'>Blog</a>
              </li>
              <li>
                <a href='#'>Contact</a>
              </li>
            </ul>
          </section>
        </nav>
      </div>
    </div>
    <div class='row'>
      <div class='twelve columns'>
        <h2>Tag: raspberry_pi</h2>
        <div class='row'>
          <div class='small-8 large-10 columns'>
            <h3>
              13 March 2014
              &raquo;
              <a href="/blog/2014/03/run-socat-for-arduino-io/">Run socat for Arduino IO</a>
            </h3>
            
            <h2 id="run-socat-for-arduino-io">Run socat for Arduino IO</h2>
            
            <p>A key element of using a Raspberry Pi for a moteino gateway
            is how to talk to /dev/ttyUSBX for the serial communication.</p>
            
            <p>Problems</p>
            
            <ul>
              <li>/dev/ttyUSBX is only available if the USB/Serial connection is there.</li>
              <li>Need to guarantee that socat is running if /dev/ttyUSBX is available.</li>
            </ul>
            
            <h3 id="survey-of-approaches">Survey of approaches.</h3>
            
            <ul>
              <li>Run socat from inittab.</li>
              <li>Start socat at boot with /etc/rc.d</li>
              <li>Start socat at boot with supervisor.d</li>
              <li>Run socat from the JRuby gateway script.</li>
            </ul>
            
            <h3 id="run-socat-from-the-jruby-gateway-script">Run socat from the JRuby gateway script.</h3>
            
            <p>Fork/exec management from JRuby seems to be
            best done with spoon</p>
            
            <h4 id="what-do-the-jruby-experts-say">What do the JRuby experts say?</h4>
            
            <h5 id="fork-and-exec-on-the-jvm-jruby-to-the-rescue">fork and exec on the JVM? JRuby to the Rescue!</h5>
            
            <p><a href="http://www.javaworld.com/article/2072765/core-java/fork-and-exec-on-the-jvm--jruby-to-the-rescue-.html">JavaWorld - fork and exec on the JVM? JRuby to the Rescue!</a></p>
            
            <ul>
              <li>By Charles Nutter </li>
              <li>
                <table>
                  <tbody>
                    <tr>
                      <td>JavaWorld</td>
                      <td>May 13, 2009 11:01 PM</td>
                    </tr>
                  </tbody>
                </table>
              </li>
            </ul>
            
            <p>As you should know by now, JRuby ships with FFI, a library that allows
            you to bind any arbitrary C function in Ruby code. So getting fork+exec
            to work was a simple matter of writing a little Ruby code:</p>
            
            <pre><code>
            require 'ffi'
            
            module Exec
             extend FFI::Library
            
             attach_function :my_exec, :execl, [:string, :string, :varargs], :int
             attach_function :fork, [], :int
            end
            
            vim1 = '/usr/bin/vim'
            vim2 = 'vim'
            if Exec.fork == 0
             Exec.my_exec vim1, vim2, :pointer, nil
            end
            
            Process.waitall
            </code></pre>
            
            <p>Update: The biggest problem with using fork+exec in this way is that you
            can’t guarantee <em>nothing</em> happens between the fork call and the exec
            call. If, for example, the JVM decides to GC or move memory around,
            you can have a fatal crash at the JVM process level. Because of that,
            I don’t recommend using fork + exec via FFI in JRuby, even though it’s
            pretty cool.</p>
            
            <p>However, since this post I’ve learned of the “posix_spawn” function
            available on most Unix variants. It’s basically fork + exec in a single
            function, plus most of the typical security and IO tweaks you might
            do after forking and before execing. It’s definitely my recommended
            alternative to fork+exec for JRuby, and to make that easier I’ve bundled
            it up as the “spoon” gem (gem install spoon) which provides spawn and
            spawnp to JRuby users directly. Here’s an example session using Spoon
            to launch JRuby as a daemon. If you just need fork+exec on the JVM,
            posix_spawn or the Spoon gem are the best way to do it.</p>
            
            <h5 id="headius--daemonizerb">headius / daemonize.rb</h5>
            
            <p><a href="https://gist.github.com/headius/321084">headius / daemonize.rb</a></p>
            
            <pre><code>
             require 'rubygems'
             require 'spoon'
             
             Spoon.spawnp 'jruby', *ARGV
            </code></pre>
            
            <pre><code>
            ~/projects/jruby ➔ jruby daemonize.rb -e "puts 'starting'; while true; sleep 1; puts 'still going'; end"
            
            ~/projects/jruby ➔ starting
            still going
            still going
            still going
            still going
            
            
            ~/projects/jruby ➔ still going
            still going
            still going
            ps
              PID TTY           TIME CMD
              342 ttys000    0:00.06 -bash
              421 ttys000    0:00.49 /usr/bin/java -d32 -client -Djruby.memory.max=500m -Djruby.stack.max=1024k
              363 ttys001    0:00.02 -bash
            still going
            ~/projects/jruby ➔ 
            kistill going
            llstill going
            still going
             421still going
            
            
            ~/projects/jruby ➔
            </code></pre>
            
            <h5 id="github-gem---headius--spoon">github gem - headius / spoon</h5>
            
            <p><a href="https://github.com/headius/spoon">github gem - headius / spoon</a></p>
            
            <p>A fork/exec replacement for FFI-capable implementations</p>
            
            <p>Spoon is an FFI binding of the posix_spawn function (and Windows
            equivalent), providing fork+exec functionality in a single shot.</p>
            
            <pre><code>
            Gem::Specification.new do |s|
              s.name = "spoon"
              s.version = "0.0.4"
              s.authors = ["Charles Oliver Nutter"]
              s.date = "2013-03-29"
              s.description = s.summary = "Spoon is an FFI binding of the posix_spawn function (and Windows equivalent), providing fork+exec functionality in a single shot."
              s.files = `git ls-files`.lines.map(&amp;:chomp)
              s.require_paths = ["lib"]
              s.add_dependency('ffi')
              s.license = "Apache-2.0"
            end
            </code></pre>
            
            <p>/usr/bin/socat
            http://linux.die.net/man/3/posix_spawn
            http://ruby-doc.org/core-1.9.3/Signal.html</p>
            
            <h1 id="include-spawnh">include <spawn.h></spawn.h></h1>
            
            <p>def self.posix_spawn(path, file_actions, spawn_attr, argv, env = ENV)
            int posix_spawn(
              pid_t *restrict pid, 
              const char *restrict path,
              const posix_spawn_file_actions_t *file_actions,
              const posix_spawnattr_t *restrict attrp,
              char *const argv[restrict],
              char *const envp[restrict]);</p>
            
            <p>int posix_spawnp(
              pid_t *restrict pid,
              const char *restrict file,
              const posix_spawn_file_actions_t *file_actions,
              const posix_spawnattr_t *restrict attrp,
              char *const argv[restrict],
              char * const envp[restrict]); </p>
            
            <p>http://ruby-doc.org/core-1.9.3/Process.html#method-c-waitpid2</p>
            
            <p>https://github.com/headius/spoon/blob/master/examples/ls.rb</p>
            
            <p>require ‘spoon’</p>
            
            <p>#
            # Do a recursive ls on the current directory, redirecting output to /tmp/ls.out
            #</p>
            
            <p>file_actions = Spoon::FileActions.new
            file_actions.close(1)
            file_actions.open(1, “/tmp/ls.out”, File::WRONLY | File::TRUNC | File::CREAT, 0600)
            spawn_attr = Spoon::SpawnAttributes.new
            pid = Spoon.posix_spawn(‘/usr/bin/env’, file_actions, spawn_attr, %w(env ls -R))</p>
            
            <p>Process.waitpid(pid)</p>
            
            <p>https://github.com/ffi/ffi/issues/336 «««««««««««&lt; wrong, should be issue on JRuby
            Fail on Raspberry Pi ARM linux JRuby. FFI not available</p>
            
            <p>https://github.com/jruby/jruby/issues/1561
            Fail on Raspberry Pi ARM linux JRuby. FFI not available</p>
            <hr>
            <h3>
              19 February 2014
              &raquo;
              <a href="/blog/2014/02/rpi-radio-gateway/">Raspberry Pi Radio Gateway Build</a>
            </h3>
            
            <h2 id="overview">Overview</h2>
            
            <p>A Raspberry Pi based gateway to distributed Moteino radio connected Arduinos.</p>
            
            <ul>
              <li>Moteino USB attached as radio interface</li>
              <li>Raspberry Pi hosted gateway based on a JRuby/JVM/Reel based HTTP server</li>
            </ul>
            
            <h2 id="looking-for-a-minimal-server-install">Looking for a minimal server install</h2>
            
            <h3 id="raspbian-wheezy-armhf-raspberry-pi-minimal-imagehttpwwwlinuxsystemsitraspbian-wheezy-armhf-raspberry-pi-minimal-image"><a href="http://www.linuxsystems.it/raspbian-wheezy-armhf-raspberry-pi-minimal-image/">Raspbian Wheezy armhf Raspberry Pi minimal image</a></h3>
            
            <p>After the Debian Wheezy armel image I made a new one based on Raspbian
            armhf. This one is compiled with hard float support, so basically
            floating point operations are MUCH faster because they are done in
            hardware instead of software emulation :)</p>
            
            <h4 id="features-include">Features include:</h4>
            
            <ul>
              <li>A minimal Raspbian Wheezy installation (similar to a netinstall)</li>
              <li>Hard Float binaries: floating point operations are done in hardware instead of software emulation, that means higher performances</li>
              <li>Disabled incremental updates, means apt-get update is much faster</li>
              <li>Workaround for a kernel bug which hangs the Raspberry Pi under heavy network/disk loads</li>
              <li>3.6.11+ hardfp kernel with latest raspberry pi patches</li>
              <li>Latest version of the firmwares</li>
              <li>Fits 1GB SD cards</li>
              <li>A very tiny 118MB image: even with a 2GB SD there is a lot of free space</li>
              <li>ssh starts by default</li>
              <li>The clock is automatically updated using ntp</li>
              <li>IPv6 support</li>
              <li>Just 14MB of ram usage after the boot</li>
            </ul>
            
            <h3 id="other-linux-images-passed-over">Other Linux images passed over</h3>
            
            <ul>
              <li><a href="http://moebiuslinux.sourceforge.net/">Moebius v1.1.1 available</a> </li>
              <li><a href="http://sirlagz.net/2013/03/04/raspbian-server-edition-version-2-3-1gb-image/">Raspbian Server Edition Version 2.3</a></li>
              <li><a href="http://www.raspberrypi.org/phpBB3/viewtopic.php?f=66&amp;t=50310">raspbian-ua-netinst - Raspbian unattended netinstaller</a></li>
            </ul>
            
            <p>The most interesting on here is the raspbian-ua-netinst.  There is Github repo for it:</p>
            
            <p><a href="https://github.com/hifi/raspbian-ua-netinst">Github repo with raspbian-ua-netinst</a></p>
            
            <p>I had previously used the Raspbian net installer here: <a href="http://www.raspbian.org/RaspbianInstaller">RaspbianInstaller</a></p>
            
            <p>But the notes now say: Currently we reccomend using hifi’s
            raspbian-ua-netinst instead if you want to use an installer rather than
            a pre-installed image.</p>
            
            <h2 id="dark-basic-install-notes">Dark Basic install notes</h2>
            
            <p><a href="http://www.linuxsystems.it/raspbian-wheezy-armhf-raspberry-pi-minimal-image/">Dark Basic install page</a></p>
            
            <p><a href="http://raspberrypi.mirrors.node2.hadrill.org.uk/darkbasic/raspbian_wheezy_20130923.img.7z">Dark Basic Raspbian SDHC Boot image</a></p>
            
            <h3 id="start-with-the-dark-basic-install-notes">Start with the Dark Basic install notes</h3>
            
            <p>You will have to extract the image with p7zip:</p>
            
            <pre><code>
            7za x raspbian_wheezy_20130923.img.7z
            </code></pre>
            
            <p>Then flash it to your SD with dd:</p>
            
            <pre><code>
            $ sudo dd bs=1M if=raspbian_wheezy_20130923.img of=/dev/sdc
            </code></pre>
            
            <p>Finally, if you have an sd larger than 1GB, grow the partition with gparted (first move the swap partition at the end).</p>
            
            <pre><code>
            $ sudo gparted /dev/sdc
            </code></pre>
            
            <p>At this point install the SDHC card on the RPI, plug in the ethernet cable,
            plug in the USB terminal cable which will power up the RPI.</p>
            
            <p>Now use screen to watch the boot up messages.</p>
            
            <p>Able to use screen to connect on laptop:</p>
            
            <pre><code>
            $ sudo screen /dev/ttyUSB0 115200
            </code></pre>
            
            <p>When connected check the stty values.</p>
            
            <pre><code>
             $ stty -a
            </code></pre>
            
            <p>Attempts to use socat instead of screen</p>
            
            <pre><code>
             $ sudo socat - /dev/ttyUSB0,b115200
             $ sudo socat - /dev/ttyUSB0,b115200,raw # no
             $ sudo socat - /dev/ttyUSB0,b115200,cs7 # no
             $ sudo socat - /dev/ttyUSB0,b115200,parenb,cs7 # no
             $ sudo socat - /dev/ttyUSB0,b115200,parenb,cs8 # no
             $ sudo socat - /dev/ttyUSB0,b115200,raw,cs7 # no
             $ sudo socat - /dev/ttyusb0,b115200,raw,cs8,start=1,stop=1 # no
             $ sudo socat - /dev/ttyusb0,b115200,parenb=false,raw,cs8,start=1,stop=1 # no
             $ sudo socat - /dev/ttyUSB0,b115200,raw,cs8 # no
             $ sudo socat - /dev/ttyUSB0,b115200,raw,cs7 # no
             $ sudo socat - /dev/ttyUSB0,b115200,raw,cs8 # no
             $ sudo socat - /dev/ttyUSB0,b115200,cs8,parenb=0 # close, but not exact
             $ sudo socat - /dev/ttyUSB0,b115200,cs8,parenb=0,stop=0 # close
             $ sudo socat - /dev/ttyUSB0,cs8,parenb=0,stop=0,ixon=1,ixoff=1 # close
             $ sudo socat - /dev/ttyUSB0,cs8,parenb=0,stop=0,ixon=1,ixoff=1,echo=0
             
             $ sudo screen /dev/ttyUSB0 115200
             $ sudo socat /dev/ttyUSB0,raw,echo=0,crlf
             
             $ socat -d -d -d -d -x TCP:localhost:7758 FILE:/dev/ttyUSB0,b9600,raw
            </code></pre>
            
            <p>Found the IP address on the router: 192.168.88.223</p>
            
            <p>ssh into the RPI and have a go.
            The root password is raspberry.</p>
            
            <pre><code>
             $ ssh root@192.168.88.223
            </code></pre>
            
            <p>Change the root password</p>
            
            <pre><code>
            passwd
            </code></pre>
            
            <p>You will have to reconfigure your timezone after the first boot:</p>
            
            <pre><code>
             # dpkg-reconfigure tzdata
            </code></pre>
            
            <p>The keyboard layout:</p>
            
            <pre><code>
             # dpkg-reconfigure console-data
            </code></pre>
            
            <p>And the localization:</p>
            
            <pre><code>
             # dpkg-reconfigure locales
            </code></pre>
            
            <h3 id="some-docs">Some docs</h3>
            
            <ul>
              <li><a href="http://www.debian.org/doc/manuals/debian-reference/index.en.html">Debian Reference</a></li>
              <li><a href="http://debian-handbook.info/browse/wheezy/">Debian 7 The Debian Administrator’s Handbook</a></li>
              <li><a href="http://www.debian.org/doc/manuals/maint-guide/index.en.html">Debian New Maintainers’ Guide</a></li>
            </ul>
            
            <h3 id="and-proceed">And proceed</h3>
            
            <h4 id="change-the-hostname">Change the hostname</h4>
            
            <p>Edit /etc/hostname to have the hostname.</p>
            
            <pre><code>
            $ cat /etc/hostname
            pika
            </code></pre>
            
            <p>Edit /etc/hosts and a line with the new hostname.</p>
            
            <pre><code>
            $ cat /etc/hosts
            127.0.0.1	localhost
            127.0.0.1	pika       &lt;&lt;&lt; added this line with hostname
             ...
            </code></pre>
            
            <h4 id="add-a-user">Add a user</h4>
            
            <pre><code>
            # adduser craig
            
            Note that from now on:
            # prompt means run as root. 
            $ prompt means run as user craig
            </code></pre>
            
            <pre><code>
            # su - craig
            </code></pre>
            
            <p>Generate a key pair for the new user</p>
            
            <pre><code>
            $ ssh-keygen
            </code></pre>
            
            <p>Check the Debian version</p>
            
            <pre><code>
            $ cat /etc/debian_version
            7.2
            </code></pre>
            
            <p>Update the system</p>
            
            <pre><code>
            # apt-get update
            # apt-get dist-upgrade
            </code></pre>
            
            <p>Install python, vim, tmux, git</p>
            
            <pre><code>
            # apt-get install python
            </code></pre>
            
            <pre><code>
            # apt-get install vim tmux git
            </code></pre>
            
            <p>Personalize git</p>
            
            <pre><code>
            # git config --global user.name "Your Name Here"
            Sets the default name for git to use when you commit
            
            # git config --global user.email "your_email@example.com"
            Sets the default email for git to use when you commit
            </code></pre>
            
            <p>Set up the vim dotfiles and vundle.</p>
            
            <pre><code>
            $ git clone git@github.com:CootCraig/dotfiles_again.git
            
            $ cd dotfiles_again/linux
            $ bash ./install.sh 
            
            cd ~/dotfiles_again/windows/vimfiles/bundle
            git clone https://github.com/gmarik/vundle.git
            </code></pre>
            
            <p>There are some notes on using vundle in the file ~/.vim/bundle/Readme.txt
            The Raspbian vim does not have python support, so disable UltiSnips
            vim script.  Comment out the following line in ~/.vimrc</p>
            
            <pre><code>
            Bundle 'vim-scripts/UltiSnips'
              to
            "Bundle 'vim-scripts/UltiSnips'
            </code></pre>
            
            <p>And then run BundleInstall.</p>
            
            <pre><code>
            in vim. :BundleInstall
            </code></pre>
            
            <h4 id="password-less-ssh">password less ssh</h4>
            
            <p>These instructions worked fine.</p>
            
            <p><a href="https://www.debian.org/devel/passwordlessssh">How to set up ssh so you aren’t asked for a password</a></p>
            
            <p>Add the contents of the public key file into ~/.ssh/authorized_keys on
            the remote site (the file should be mode 600).</p>
            
            <h4 id="make-user-a-sudoer">make user a sudoer</h4>
            
            <pre><code>
            # apt-get install sudo
            # adduser craig sudo
            </code></pre>
            
            <h4 id="pause-and-make-a-backup-of-the-sdhc-image">Pause and make a backup of the SDHC image</h4>
            
            <p>On the Ubuntu host.</p>
            
            <pre><code>
            $ sudo dd bs=1M if=/dev/sdc of=pika_20140220_1441.img
            7519+0 records in
            7519+0 records out
            7884242944 bytes (7.9 GB) copied, 446.404 s, 17.7 MB/s
            
            $ 7za a -t7z pika_20140220_1441.img.7z pika_20140220_1441.img
            
            $ ls -l pika_2014*
            -rw-r--r-- 1 craig craig 7884242944 Feb 20 14:49 pika_20140220_1441.img
            -rw-r--r-- 1 craig craig  254215741 Feb 20 15:09 pika_20140220_1441.img.7z
            </code></pre>
            
            <h4 id="install-compiler-tools">Install Compiler tools</h4>
            
            <pre><code>
            # apt-get install build-essential checkinstall libtool automake uuid-dev
            
            The following extra packages will be installed:
              autoconf autotools-dev binutils bzip2 cpp cpp-4.6 dpkg-dev fakeroot g++ g++-4.6 gcc gcc-4.6 libalgorithm-diff-perl libalgorithm-diff-xs-perl libalgorithm-merge-perl libdpkg-perl libfile-fcntllock-perl libgmp10 libgomp1 libltdl-dev
              libltdl7 libmpc2 libmpfr4 libstdc++6-4.6-dev libtimedate-perl m4 make
            Suggested packages:
              autoconf2.13 autoconf-archive gnu-standards autoconf-doc gettext binutils-doc bzip2-doc cpp-doc gcc-4.6-locales debian-keyring gcc-4.6-doc libstdc++6-4.6-dbg gcc-multilib manpages-dev automake1.9 flex bison gdb gcc-doc
              libmudflap0-4.6-dev libgcc1-dbg libgomp1-dbg libquadmath-dbg libmudflap0-dbg binutils-gold libtool-doc libstdc++6-4.6-doc automaken gfortran fortran95-compiler gcj make-doc
            The following NEW packages will be installed:
              autoconf automake autotools-dev binutils build-essential bzip2 checkinstall cpp cpp-4.6 dpkg-dev fakeroot g++ g++-4.6 gcc gcc-4.6 libalgorithm-diff-perl libalgorithm-diff-xs-perl libalgorithm-merge-perl libdpkg-perl
              libfile-fcntllock-perl libgmp10 libgomp1 libltdl-dev libltdl7 libmpc2 libmpfr4 libstdc++6-4.6-dev libtimedate-perl libtool m4 make uuid-dev
            0 upgraded, 32 newly installed, 0 to remove and 0 not upgraded.
            Need to get 26.8 MB of archives.
            After this operation, 69.2 MB of additional disk space will be used.
            </code></pre>
            
            <h4 id="zeromq-build-and-install">Zeromq build and install</h4>
            
            <p><a href="http://download.zeromq.org/zeromq-3.2.4.tar.gz">Source for stable release 3.2.4</a></p>
            
            <p>This is supported by ffi-rzmq, the JRuby librar I plan to use.
            I unpacked for build at:</p>
            
            <pre><code>
            # cd /opt/zeromq/zeromq-3.2.4
            </code></pre>
            
            <p>The installation will be to /usr/local/</p>
            
            <pre><code>
            # ./configure --help
            Installation directories:
              --prefix=PREFIX         install architecture-independent files in PREFIX
                                      [/usr/local]
              --exec-prefix=EPREFIX   install architecture-dependent files in EPREFIX
                                      [PREFIX]
            </code></pre>
            
            <p>Build and install.</p>
            
            <pre><code>
            # ./configure
            # make
            # checkinstall
            </code></pre>
            
            <p>A debian package was left here:</p>
            
            <pre><code>
            /opt/zeromq/zeromq-3.2.4/zeromq_3.2.4-1_armhf.deb
            </code></pre>
            
            <h4 id="set-up-serial-console">Set up serial console</h4>
            
            <p>From /etc/inittab</p>
            
            <pre><code>
            ...
            # Example how to put a getty on a serial line (for a terminal)
            #
            #T0:23:respawn:/sbin/getty -L ttyS0 9600 vt100
            #T1:23:respawn:/sbin/getty -L ttyS1 9600 vt100
            ...
            </code></pre>
            
            <p>However, this is the device file we see:</p>
            
            <pre><code>
            $ ls -l /dev/ttyAMA0
            crw-rw---T 1 root dialout 204, 64 Dec 31  1969 /dev/ttyAMA0
            </code></pre>
            
            <p>So let’s add this line to /etc/inittab</p>
            
            <pre><code>
            ...
            # Example how to put a getty on a serial line (for a terminal)
            #
            #T0:23:respawn:/sbin/getty -L ttyS0 9600 vt100
            T0:23:respawn:/sbin/getty -L ttyAMA0 115200 vt100
            #T1:23:respawn:/sbin/getty -L ttyS1 9600 vt100
            ...
            </code></pre>
            
            <p><a href="http://www.gnu.org/software/screen/manual/screen.html">Screen User’s Manual</a></p>
            
            <h3 id="post-to-raspberrypiorgforum-about-edimax-ew-7811un">Post to raspberrypi.org/forum about Edimax EW-7811UN</h3>
            
            <p>I have failed to get Wifi working and would like some help.
            I’m not sure how how to troubleshoot from here.
            Here are some details on my setup.</p>
            
            <p>Using this OS image. I want a minimal install with no X.</p>
            
            <p><a href="http://raspberrypi.mirrors.node2.hadrill.org.uk/darkbasic/raspbian_wheezy_20130923.img.7z">Dark Basic Raspbian SDHC Boot image</a></p>
            
            <p>With this USB wifi plug: Edimax EW-7811UN</p>
            
            <p>Boot time messages include these related to the Edimax plug.</p>
            
            <pre><code>
            [    3.232011] usb 1-1.2: new high-speed USB device number 4 using dwc_otg
            [    3.364155] usb 1-1.2: New USB device found, idVendor=7392, idProduct=7811
            [    3.380505] usb 1-1.2: New USB device strings: Mfr=1, Product=2, SerialNumber=3
            [    3.399033] usb 1-1.2: Product: 802.11n WLAN Adapter
            [    3.411807] usb 1-1.2: Manufacturer: Realtek
            [    3.417625] usb 1-1.2: SerialNumber: 00e04c000001
             ...
            [   15.826605] IPv6: ADDRCONF(NETDEV_UP): wlan0: link is not ready
            </code></pre>
            
            <p>System reports as.</p>
            
            <pre><code>
            root@pika:~# uname -a
            Linux pika 3.6.11+ #545 PREEMPT Fri Sep 20 23:57:55 BST 2013 armv6l GNU/Linux
            </code></pre>
            
            <p>More evidence the Edimax Wifi is seen</p>
            
            <pre><code>
            root@pika:~# lsusb
            Bus 001 Device 002: ID 0424:9512 Standard Microsystems Corp. 
            Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
            Bus 001 Device 003: ID 0424:ec00 Standard Microsystems Corp. 
            Bus 001 Device 004: ID 7392:7811 Edimax Technology Co., Ltd EW-7811Un 802.11n Wireless Adapter [Realtek RTL8188CUS]
            </code></pre>
            
            <p>The wifi driver module is loaded</p>
            
            <pre><code>
            root@pika:~# lsmod
            Module                  Size  Used by
             ...
            8192cu                490361  0 
             ...
            </code></pre>
            
            <p>Output of iwconfig</p>
            
            <pre><code>
            root@pika:~# iwconfig
            wlan0     unassociated  Nickname:"&lt;WIFI@REALTEK&gt;"
                      Mode:Auto  Frequency=2.412 GHz  Access Point: Not-Associated   
                      Sensitivity:0/0  
                      Retry:off   RTS thr:off   Fragment thr:off
                      Encryption key:off
                      Power Management:off
                      Link Quality:0  Signal level:0  Noise level:0
                      Rx invalid nwid:0  Rx invalid crypt:0  Rx invalid frag:0
                      Tx excessive retries:0  Invalid misc:0   Missed beacon:0
            </code></pre>
            
            <p>The MicroTik Router is seen.</p>
            
            <pre><code>
            root@pika:~# iwlist wlan0 scan
            wlan0     Scan completed :
                      Cell 01 - Address: D4:CA:6D:56:86:59
                                ESSID:"Pirates"
                                Protocol:IEEE 802.11bgn
                                Mode:Master
                                Frequency:2.412 GHz (Channel 1)
                                Encryption key:on
                                Bit Rates:300 Mb/s
                                Extra:wpa_ie=dd160050f20101000050f20401000050f20401000050f202
                                IE: WPA Version 1
                                    Group Cipher : CCMP
                                    Pairwise Ciphers (1) : CCMP
                                    Authentication Suites (1) : PSK
                                Extra:rsn_ie=30120100000fac040100000fac040100000fac02
                                IE: IEEE 802.11i/WPA2 Version 1
                                    Group Cipher : CCMP
                                    Pairwise Ciphers (1) : CCMP
                                    Authentication Suites (1) : PSK
                                Quality=100/100  Signal level=100/100  
            </code></pre>
            
            <p>Contents of /etc/network/interfaces.</p>
            
            <pre><code>
            root@pika:/etc/network# cat /etc/network/interfaces
            # interfaces(5) file used by ifup(8) and ifdown(8)
            auto lo
            iface lo inet loopback
            
            allow-hotplug eth0
            iface eth0 inet dhcp
            
            allow-hotplug wlan0
            iface wlan0 inet dhcp
              wpa-ssid Pirates
              wpa-psk thepassword
            </code></pre>
            
            <p>But I have not been able to enable the Wifi.</p>
            
            <pre><code>
            root@pika:~# ifup wlan0
            Internet Systems Consortium DHCP Client 4.2.2
            Copyright 2004-2011 Internet Systems Consortium.
            All rights reserved.
            For info, please visit https://www.isc.org/software/dhcp/
            
            [ 1389.028246] IPv6: ADDRCONF(NETDEV_UP): wlan0: link is not ready
            Listening on LPF/wlan0/80:1f:02:a2:df:94
            Sending on   LPF/wlan0/80:1f:02:a2:df:94
            Sending on   Socket/fallback
            DHCPDISCOVER on wlan0 to 255.255.255.255 port 67 interval 5
            DHCPDISCOVER on wlan0 to 255.255.255.255 port 67 interval 8
            DHCPDISCOVER on wlan0 to 255.255.255.255 port 67 interval 11
            DHCPDISCOVER on wlan0 to 255.255.255.255 port 67 interval 15
            DHCPDISCOVER on wlan0 to 255.255.255.255 port 67 interval 18
            DHCPDISCOVER on wlan0 to 255.255.255.255 port 67 interval 4
            No DHCPOFFERS received.
            No working leases in persistent database - sleeping.
            </code></pre>
            
            <p>Note, the MicroTik router Wifi is in use
            by all the laptops we have tried.</p>
            
            <h3 id="set-up-wifi">Set up wifi</h3>
            
            <ul>
              <li><a href="http://elinux.org/RPi_edimax_EW-7811Un">Installing the Edimax EW-7811UN wireless adapter on Raspberry Pi</a></li>
              <li><a href="http://www.howtogeek.com/167425/how-to-setup-wi-fi-on-your-raspberry-pi-via-the-command-line/">How to Setup Wi-Fi On Your Raspberry Pi via the Command Line</a></li>
              <li><a href="http://www./etc/network/interfaces.com/projects/raspberry-pi-installing-the-edimax-ew-7811un-usb-wifi-adapte.html">savagehomeautomation - Raspberry Pi - Installing the Edimax EW-7811Un USB WiFi</a></li>
              <li><a href="https://wiki.debian.org/WiFi/HowToUse">Debian - WiFi How to Use</a></li>
              <li><a href="http://jeffskinnerbox.wordpress.com/2012/11/05/wifi-support-on-raspberry-pi/">jeffskinnerbox - wifi-support-on-raspberry-pi</a></li>
              <li><a href="https://wiki.debian.org/rtl819x">Debian page - rtl819x</a></li>
            </ul>
            
            <h2 id="todo-list">todo list</h2>
            
            <h3 id="done">done</h3>
            
            <ul>
              <li>password less ssh</li>
              <li>make user a sudoer</li>
              <li>checkinstall and compile tools</li>
              <li>zeromq compile and install</li>
              <li>serial console</li>
            </ul>
            
            <h3 id="todo">todo</h3>
            
            <ul>
              <li>wifi setup</li>
              <li>fixed IP address</li>
              <li>Oracle JVM</li>
              <li>JRuby</li>
              <li>JRuby/Reel test</li>
            </ul>
            <hr>
            <h3>
              05 March 2014
              &raquo;
              <a href="/blog/2014/03/raspbian-netinst/">Raspbian netinst</a>
            </h3>
            
            <h2 id="net-installer-image">Net Installer Image</h2>
            
            <ul>
              <li><a href="http://hifi.iki.fi/raspbian-ua-netinst/raspbian-ua-netinst-latest.img.xz">raspbian-ua-netinst - image download</a></li>
              <li><a href="https://github.com/hifi/raspbian-ua-netinst">image link and instructions on github</a></li>
            </ul>
            
            <h2 id="notes">Notes</h2>
            
            <h3 id="to-flash-your-sd-card-on-linux">To flash your SD card on Linux:</h3>
            
            <pre><code>
            xzcat /path/to/raspbian-ua-netinst-latest.img.xz &gt; glop.img
            sudo dd bs=1M if= glop.img of=/dev/sdc
            rm glop.img
            </code></pre>
            
            <p>Boot with the SDHC and
            view the HDMI video to see install progress.</p>
            
            <h3 id="first-boot">First boot</h3>
            
            <p>The system is almost completely unconfigured on first boot. Here are
            some tasks you most definitely want to do on first boot.</p>
            
            <p>The default root password is raspbian.</p>
            
            <p>Set new root password: </p>
            
            <pre><code>
            passwd
            </code></pre>
            
            <p>Configure your default locale: </p>
            
            <pre><code>
            dpkg-reconfigure locales
            </code></pre>
            
            <p>Configure your timezone: </p>
            
            <pre><code>
            dpkg-reconfigure tzdata
            </code></pre>
            
            <p>Install latest kernel and firmware package: </p>
            
            <pre><code>
            apt-get update
            apt-get install linux-image-rpi-rpfv raspberrypi-bootloader-nokernel
            
             ...
            update-initramfs: Generating /boot/initrd.img-3.10-3-rpi
            </code></pre>
            
            <p>Replace old kernel.img with latest kernel: </p>
            
            <pre><code>
            cp /vmlinuz /boot/kernel.img
            </code></pre>
            
            <p>Reboot to new kernel and firmware: </p>
            
            <pre><code>
            reboot
            </code></pre>
            
            <h3 id="change-the-hostname">Change the hostname</h3>
            
            <p>Edit /etc/hostname and /etc/hosts to have the hostname.</p>
            
            <pre><code>
            root@pi:/etc# cat hostname
            pika
            root@pi:/etc# cat hosts
            127.0.0.1 localhost pika
            </code></pre>
            
            <h3 id="set-up-serial-console">Set up serial console</h3>
            
            <p>Edit /etc/inittab and add a line to enable the serial console.</p>
            
            <pre><code>
            #T0:23:respawn:/sbin/getty -L ttyS0 9600 vt100
            T0:23:respawn:/sbin/getty -L ttyAMA0 115200 vt100
            #T1:23:respawn:/sbin/getty -L ttyS1 9600 vt100
            </code></pre>
            
            <h3 id="after-a-reboot-check-the-serial-console-and-hostname">After a reboot, check the serial console and hostname.</h3>
            
            <pre><code>
            $ sudo screen /dev/ttyUSB0 115200
            </code></pre>
            
            <pre><code>
            root@pika:~# uname -a
            Linux pika 3.10-3-rpi #1 Debian 3.10.11-1+rpi4 (2014-01-24) armv6l GNU/Linux
            </code></pre>
            
            <p>ssh is working.  This is the IP address assigned to eth0</p>
            <pre><code>
            ssh root@192.168.88.223
            </code></pre>
            
            <h3 id="archive-the-image-so-far">Archive the image so far</h3>
            
            <p>Check the size of file systems.  Looks like the whole 8GB SDHC is used.</p>
            
            <pre><code>
            root@pika:~# df -k
            Filesystem     1K-blocks   Used Available Use% Mounted on
            rootfs           7399324 302888   6697524   5% /
            /dev/root        7399324 302888   6697524   5% /
            devtmpfs          224292      0    224292   0% /dev
            tmpfs              44876    116     44760   1% /run
            tmpfs               5120      0      5120   0% /run/lock
            tmpfs              89740      0     89740   0% /run/shm
            /dev/mmcblk0p1     48742  22956     25786  48% /boot
            tmpfs              89740      0     89740   0% /tmp
            </code></pre>
            
            <pre><code>
            $ sudo dd bs=1M if=/dev/sdc of=pika_20140305_0958.img
            $ 7za a -t7z pika_20140305_0958.img.7z pika_20140305_0958.img
            </code></pre>
            
            <h3 id="set-up-the-wifi-edimax-ew-7811un">set up the wifi Edimax EW-7811UN</h3>
            
            <p>I had problems, but got help here.</p>
            
            <p><a href="http://www.raspberrypi.org/forum/viewtopic.php?f=28&amp;t=71314">Post on raspberrypi.org forum - Where to get help on wifi?</a></p>
            
            <p>So I added 2 packages.</p>
            
            <pre><code>
            apt-get install wpasupplicant
            apt-get install wireless-tools
            </code></pre>
            
            <p>Here is the trail
            Verify the Edimax EW-7811Un is seen.</p>
            
            <pre><code>
            root@pika:~# lsusb
             ...
            Bus 001 Device 004: ID 7392:7811 Edimax Technology Co., Ltd EW-7811Un 802.11n Wireless Adapter [Realtek RTL8188CUS]
             ...
            </code></pre>
            
            <p>Note that the wpa-psk entry is not the passphrase.
            With the ssid and passphrase this site can give the psk.</p>
            
            <p><a href="http://www.wireshark.org/tools/wpa-psk.html">Wireshark - WPA PSK (Raw Key) Generator</a></p>
            
            <p>Here is the interfaces file.</p>
            
            <pre><code>
            root@pika:~# cat /etc/network/interfaces
            auto lo
            iface lo inet loopback
            
            auto eth0
            iface eth0 inet dhcp
            
            auto wlan0
            allow-hotplug wlan0
            iface wlan0 inet dhcp
              wpa-ssid Pirates
              wpa-psk alonghexstringpsk
            </code></pre>
            
            <p>See if iwlist from wireless-tools finds the router. </p>
            
            <pre><code>
            root@pika:~# iwlist wlan0 scan
            
            wlan0     Scan completed :
                      Cell 01 - Address: D4:CA:6D:56:86:59
                                ESSID:"Pirates"
                                Protocol:IEEE 802.11bgn
                                Mode:Master
                                Frequency:2.412 GHz (Channel 1)
                                Encryption key:on
                                Bit Rates:300 Mb/s
                                Extra:wpa_ie=dd1a0050f20101000050f20402000050f2040050f20201000050f202
                                IE: WPA Version 1
                                    Group Cipher : CCMP
                                    Pairwise Ciphers (2) : CCMP TKIP
                                    Authentication Suites (1) : PSK
                                Extra:rsn_ie=30160100000fac040200000fac04000fac020100000fac02
                                IE: IEEE 802.11i/WPA2 Version 1
                                    Group Cipher : CCMP
                                    Pairwise Ciphers (2) : CCMP TKIP
                                    Authentication Suites (1) : PSK
                                Quality=100/100  Signal level=100/100  
            </code></pre>
            
            <p>For the wifi interface</p>
            
            <pre><code>
            $ ssh craig@192.168.88.218
            </code></pre>
            
            <p>For the wired interface</p>
            
            <pre><code>
            $ ssh root@192.168.88.223
            </code></pre>
            
            <h3 id="add-a-user">add a user</h3>
            
            <pre><code>
            pika# adduser craig
            </code></pre>
            
            <h3 id="generate-a-key-pair-for-the-new-user">Generate a key pair for the new user</h3>
            
            <pre><code>
            $ ssh-keygen
            </code></pre>
            
            <h3 id="install-python-vim-tmux-git">Install python, vim, tmux, git</h3>
            
            <pre><code>
            pika# apt-get install python
             ...
            The following NEW packages will be installed:
              file libmagic1 libsqlite3-0 mime-support python python-minimal python2.7 python2.7-minimal
             ...
            
            pika# apt-get install vim tmux git
             ...
            The following NEW packages will be installed:
              git git-man libclass-isa-perl libcurl3-gnutls liberror-perl libevent-2.0-5 libgpm2 libldap-2.4-2 libpopt0 librtmp0 libsasl2-2 libsasl2-modules libssh2-1 libswitch-perl patch perl perl-modules rsync tmux vim vim-runtime
             ...
            </code></pre>
            
            <h3 id="personalize-git">Personalize git</h3>
            
            <pre><code>
            $ git config --global user.name "Your Name Here"
            Sets the default name for git to use when you commit
            
            $ git config --global user.email "your_email@example.com"
            Sets the default email for git to use when you commit
            </code></pre>
            
            <h3 id="set-up-the-vim-dotfiles-and-vundle">Set up the vim dotfiles and vundle.</h3>
            
            <pre><code>
            $ git clone git@github.com:CootCraig/dotfiles_again.git
            
            $ cd dotfiles_again/linux
            $ bash ./install.sh 
            
            cd ~/dotfiles_again/windows/vimfiles/bundle
            git clone https://github.com/gmarik/vundle.git
            </code></pre>
            
            <p>There are some notes on using vundle in the file ~/.vim/bundle/Readme.txt
            The Raspbian vim does not have python support, so disable UltiSnips
            vim script.  Comment out the following line in ~/.vimrc</p>
            
            <pre><code>
            Bundle 'vim-scripts/UltiSnips'
              to
            "Bundle 'vim-scripts/UltiSnips'
            </code></pre>
            
            <p>And then run BundleInstall.</p>
            
            <pre><code>
            in vim. :BundleInstall
            </code></pre>
            
            <h3 id="password-less-ssh">password less ssh</h3>
            
            <p>These instructions worked fine.</p>
            
            <p><a href="https://www.debian.org/devel/passwordlessssh">How to set up ssh so you aren’t asked for a password</a></p>
            
            <p>Add the contents of the public key file into ~/.ssh/authorized_keys on
            the remote site (the file should be mode 600).</p>
            
            <h3 id="make-user-a-sudoer">make user a sudoer</h3>
            
            <pre><code>
            pika# apt-get install sudo
            pika# adduser craig sudo
            </code></pre>
            
            <h2 id="install-compiler-tools">Install Compiler tools</h2>
            
            <pre><code>
            pika# apt-get install build-essential checkinstall libtool automake uuid-dev
             ...
            The following NEW packages will be installed:
              autoconf automake autotools-dev binutils build-essential bzip2 checkinstall cpp cpp-4.6 dpkg-dev fakeroot g++ g++-4.6 gcc gcc-4.6 gcc-4.6-base libalgorithm-diff-perl libalgorithm-diff-xs-perl libalgorithm-merge-perl libc-dev-bin
              libc6-dev libdpkg-perl libfile-fcntllock-perl libgmp10 libgomp1 libltdl-dev libltdl7 libmpc2 libmpfr4 libstdc++6-4.6-dev libtimedate-perl libtool linux-libc-dev m4 make manpages manpages-dev uuid-dev xz-utils
             ...
            </code></pre>
            
            <h3 id="zeromq-build-and-install">Zeromq build and install</h3>
            
            <p><a href="http://download.zeromq.org/zeromq-3.2.4.tar.gz">Source for stable release 3.2.4</a></p>
            
            <p>This is supported by ffi-rzmq, the JRuby library I plan to use.
            I unpacked for build at:</p>
            
            <pre><code>
            pika# cd /opt/zeromq/zeromq-3.2.4
            </code></pre>
            
            <p>The installation will be to /usr/local/</p>
            
            <pre><code>
            pika# ./configure --help
            Installation directories:
              --prefix=PREFIX         install architecture-independent files in PREFIX
                                      [/usr/local]
              --exec-prefix=EPREFIX   install architecture-dependent files in EPREFIX
                                      [PREFIX]
            </code></pre>
            
            <pre><code>
            pika# ./configure
            pika# make
            pika# checkinstall
            </code></pre>
            
            <p>A debian package was left here:</p>
            
            <pre><code>
            /opt/zeromq/zeromq-3.2.4/zeromq_3.2.4-1_armhf.deb
            </code></pre>
            
            <h3 id="install-socat">install socat</h3>
            
            <pre><code>
            pika# apt-get install socat
            </code></pre>
            
            <h3 id="install-supervisor-with-python-pip">Install supervisor with python-pip</h3>
            
            <pre><code>
            pika# apt-get install python-pip
             ...
            The following NEW packages will be installed:
              python-pip python-pkg-resources python-setuptools python2.6 python2.6-minimal
             ...
            
            pika# pip install supervisor
             ...
              Downloading supervisor-3.0.tar.gz (459Kb): 459Kb downloaded
             ...
                Installing echo_supervisord_conf script to /usr/local/bin
                Installing pidproxy script to /usr/local/bin
                Installing supervisorctl script to /usr/local/bin
                Installing supervisord script to /usr/local/bin
             ...
            </code></pre>
            
            <p>install python-pip mentioned apt-utils not installed, so let’s install it.</p>
            
            <pre><code>
            pika# apt-get install apt-utils
             ...
            The following NEW packages will be installed:
              apt-utils libapt-inst1.5
             ...
            </code></pre>
            
            <h4 id="supervisor-setup---run-socat-at-boot">supervisor setup - run socat at boot</h4>
            
            <ul>
              <li><a href="http://supervisord.org/configuration.html">supervisord online help - configuration</a></li>
              <li><a href="http://bixly.com/blog/supervisord-or-how-i-learned-to-stop-worrying-and-um-use-supervisord/">bixly blog - user supervisord</a></li>
            </ul>
            
            <pre><code>
            for copy and paste
            </code></pre>
            
            <h3 id="install-oracle-jdk-8">Install Oracle jdk 8</h3>
            
            <p>extracted
            jdk-8-fcs-b129-linux-arm-vfp-hflt-06_feb_2014.tar.gz
            to /opt/java/jdk1.8.0</p>
            
            <p>Made a symbolic link for /opt/java/jdk</p>
            
            <pre><code>
            $ ls -l /opt/java/jdk
            lrwxrwxrwx 1 root root 9 Mar  5 22:06 /opt/java/jdk -&gt; jdk1.8.0/
            </code></pre>
            
            <h4 id="add-jdk-to-the-path">Add jdk to the path</h4>
            
            <ul>
              <li>/etc/profile</li>
              <li>/etc/sudoers</li>
              <li>/etc/environment</li>
              <li>/etc/login.defs</li>
            </ul>
            
            <p>Modify /etc/login.defs</p>
            
            <pre><code>
            ENV_SUPATH      PATH=/opt/java/jdk/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
            ENV_PATH        PATH=/opt/java/jdk/bin:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games
            </code></pre>
            
            <p>Modify /etc/profile</p>
            
            <pre><code>
            if [ "`id -u`" -eq 0 ]; then
              PATH="/opt/java/jdk/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
            else
              PATH="/opt/java/jdk/bin:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games"
            fi
            </code></pre>
            
            <p>modify /etc/sudoers</p>
            
            <pre><code>
            Defaults        secure_path="/opt/java/jdk/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
            </code></pre>
            
            <p>/etc/environment was empty</p>
            
            <p>Verify that java runs and the version.</p>
            
            <pre><code>
            $ java -version
            java version "1.8.0"
            Java(TM) SE Runtime Environment (build 1.8.0-b129)
            Java HotSpot(TM) Client VM (build 25.0-b69, mixed mode)
            </code></pre>
            
            <h3 id="install-jruby">install jruby</h3>
            
            <p>Unpack the latest jruby tarball to
            /opt/jruby/jruby-1.7.11</p>
            
            <p>Make a symbolic to this version of jruby.</p>
            
            <pre><code>
            $ ls -l /opt/jruby/jruby
            lrwxrwxrwx 1 root root 13 Mar  5 23:06 /opt/jruby/jruby -&gt; jruby-1.7.11/
            </code></pre>
            
            <h4 id="modify-the-path-to-add-optjrubyjrubybin">modify the path to add /opt/jruby/jruby/bin</h4>
            
            <p>Modify /etc/login.defs</p>
            
            <pre><code>
            ENV_SUPATH      PATH=/opt/java/jdk/bin:/opt/jruby/jruby/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
            ENV_PATH        PATH=/opt/java/jdk/bin:/opt/jruby/jruby/bin:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games
            </code></pre>
            
            <p>Modify /etc/profile</p>
            
            <pre><code>
            if [ "`id -u`" -eq 0 ]; then
              PATH="/opt/java/jdk/bin:/opt/jruby/jruby/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
            else
              PATH="/opt/java/jdk/bin:/opt/jruby/jruby/bin:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games"
            fi
            </code></pre>
            
            <p>modify /etc/sudoers</p>
            
            <pre><code>
            Defaults        secure_path="/opt/java/jdk/bin:/opt/jruby/jruby/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
            </code></pre>
            
            <h4 id="define-javahome-in-the-environment">Define JAVA_HOME in the environment</h4>
            
            <p>Add to /etc/environment</p>
            
            <pre><code>
            JAVA_HOME=/opt/java/jdk
            </code></pre>
            
            <p>Verify that jruby runs.</p>
            
            <pre><code>
            $ jruby -v
            jruby 1.7.11 (1.9.3p392) 2014-02-24 86339bb on Java HotSpot(TM) Client VM 1.8.0-b129 +indy [linux-arm]
            </code></pre>
            
            <h4 id="change-permissions-in-jruby-folder-to-allow-user-craig-to-add-gems">Change permissions in jruby folder to allow user craig to add gems</h4>
            
            <pre><code>
            pika# adduser craig staff
            
            pika# cd /opt/jruby/jruby/lib/ruby/gems
            pika# sudo bash -c "find shared -type d |xargs chmod 775"
            pika# sudo bash -c "find shared |xargs chmod g+w"
            
            pika# cd /opt/jruby/jruby-1.7.11
            pika# sudo bash -c "find bin |xargs chmod g+w"
            </code></pre>
            
            <h4 id="gem-install-bundler">gem install bundler</h4>
            
            <pre><code>
            $ gem install bundler
            Fetching: bundler-1.5.3.gem (100%)
            /opt/jruby/jruby-1.7.11/lib/ruby/shared/rubygems/installer.rb:507 warning: executable? does not in this environment and will return a dummy value
            Successfully installed bundler-1.5.3
            1 gem installed
            </code></pre>
            
            <h2 id="todo">todo</h2>
            
            <h3 id="done">done</h3>
            
            <ul>
              <li>serial console</li>
              <li>wifi setup</li>
              <li>password less ssh</li>
              <li>make user a sudoer</li>
              <li>checkinstall and compile tools</li>
              <li>zeromq compile and install</li>
              <li>supervisor</li>
              <li>socat</li>
              <li>Oracle JVM</li>
              <li>JRuby</li>
            </ul>
            
            <h3 id="todo-1">todo</h3>
            
            <ul>
              <li>fixed IP address</li>
              <li>JRuby/Reel test</li>
            </ul>
            <hr>
          </div>
          <div class='small-4 large-2 columns'>
            <h5>Tags</h5>
            <ul class='no-bullet'>
              <li><a href="/blog/tags/linux" rel="tag">linux</a></li>
              <li><a href="/blog/tags/diy" rel="tag">diy</a></li>
              <li><a href="/blog/tags/arduino" rel="tag">arduino</a></li>
              <li><a href="/blog/tags/debian" rel="tag">debian</a></li>
              <li><a href="/blog/tags/turntable" rel="tag">turntable</a></li>
              <li><a href="/blog/tags/antenna" rel="tag">antenna</a></li>
              <li><a href="/blog/tags/cellphone" rel="tag">cellphone</a></li>
              <li><a href="/blog/tags/led" rel="tag">led</a></li>
              <li><a href="/blog/tags/diy_audio" rel="tag">diy_audio</a></li>
              <li><a href="/blog/tags/tuner" rel="tag">tuner</a></li>
              <li><a href="/blog/tags/bluehost" rel="tag">bluehost</a></li>
              <li><a href="/blog/tags/mpd" rel="tag">mpd</a></li>
              <li><a href="/blog/tags/raspberry_pi" rel="tag">raspberry_pi</a></li>
              <li><a href="/blog/tags/rune_audio" rel="tag">rune_audio</a></li>
              <li><a href="/blog/tags/am" rel="tag">am</a></li>
              <li><a href="/blog/tags/chipamp" rel="tag">chipamp</a></li>
              <li><a href="/blog/tags/nas" rel="tag">nas</a></li>
              <li><a href="/blog/tags/ti_cc_3000" rel="tag">ti_cc_3000</a></li>
              <li><a href="/blog/tags/wifi" rel="tag">wifi</a></li>
              <li><a href="/blog/tags/fm" rel="tag">fm</a></li>
              <li><a href="/blog/tags/volumio" rel="tag">volumio</a></li>
              <li><a href="/blog/tags/beaglebone" rel="tag">beaglebone</a></li>
              <li><a href="/blog/tags/arch_linux" rel="tag">arch_linux</a></li>
              <li><a href="/blog/tags/reactor_safety" rel="tag">reactor_safety</a></li>
              <li><a href="/blog/tags/i3wm" rel="tag">i3wm</a></li>
              <li><a href="/blog/tags/bluetooth" rel="tag">bluetooth</a></li>
              <li><a href="/blog/tags/stereo_system" rel="tag">stereo_system</a></li>
              <li><a href="/blog/tags/git" rel="tag">git</a></li>
              <li><a href="/blog/tags/sql" rel="tag">sql</a></li>
              <li><a href="/blog/tags/javascript" rel="tag">javascript</a></li>
              <li><a href="/blog/tags/preamp" rel="tag">preamp</a></li>
              <li><a href="/blog/tags/developers_to_watch" rel="tag">developers_to_watch</a></li>
              <li><a href="/blog/tags/headphone_amp" rel="tag">headphone_amp</a></li>
              <li><a href="/blog/tags/cd_player" rel="tag">cd_player</a></li>
              <li><a href="/blog/tags/philips_cd935" rel="tag">philips_cd935</a></li>
              <li><a href="/blog/tags/email" rel="tag">email</a></li>
              <li><a href="/blog/tags/robotics" rel="tag">robotics</a></li>
              <li><a href="/blog/tags/lp_storage" rel="tag">lp_storage</a></li>
              <li><a href="/blog/tags/vinyl_lp" rel="tag">vinyl_lp</a></li>
              <li><a href="/blog/tags/cleaning" rel="tag">cleaning</a></li>
              <li><a href="/blog/tags/survival" rel="tag">survival</a></li>
              <li><a href="/blog/tags/hardware" rel="tag">hardware</a></li>
              <li><a href="/blog/tags/job_hunt" rel="tag">job_hunt</a></li>
              <li><a href="/blog/tags/gammu" rel="tag">gammu</a></li>
              <li><a href="/blog/tags/rs232" rel="tag">rs232</a></li>
              <li><a href="/blog/tags/max232" rel="tag">max232</a></li>
              <li><a href="/blog/tags/arduino_ide" rel="tag">arduino_ide</a></li>
              <li><a href="/blog/tags/rails" rel="tag">rails</a></li>
              <li><a href="/blog/tags/rails-api" rel="tag">rails-api</a></li>
              <li><a href="/blog/tags/tuned_loop" rel="tag">tuned_loop</a></li>
              <li><a href="/blog/tags/repair" rel="tag">repair</a></li>
              <li><a href="/blog/tags/bluez" rel="tag">bluez</a></li>
              <li><a href="/blog/tags/programming" rel="tag">programming</a></li>
              <li><a href="/blog/tags/gogs" rel="tag">gogs</a></li>
              <li><a href="/blog/tags/pc_audio" rel="tag">pc_audio</a></li>
              <li><a href="/blog/tags/subwoofer" rel="tag">subwoofer</a></li>
              <li><a href="/blog/tags/security" rel="tag">security</a></li>
              <li><a href="/blog/tags/vm_host" rel="tag">vm_host</a></li>
              <li><a href="/blog/tags/virtualbox" rel="tag">virtualbox</a></li>
              <li><a href="/blog/tags/headset" rel="tag">headset</a></li>
              <li><a href="/blog/tags/ebay" rel="tag">ebay</a></li>
              <li><a href="/blog/tags/gitlab" rel="tag">gitlab</a></li>
              <li><a href="/blog/tags/cubox" rel="tag">cubox</a></li>
              <li><a href="/blog/tags/hardware_hackers" rel="tag">hardware_hackers</a></li>
              <li><a href="/blog/tags/pickup" rel="tag">pickup</a></li>
              <li><a href="/blog/tags/welcome" rel="tag">welcome</a></li>
              <li><a href="/blog/tags/diy_li_ion_battery_pack" rel="tag">diy_li_ion_battery_pack</a></li>
              <li><a href="/blog/tags/job_skills" rel="tag">job_skills</a></li>
              <li><a href="/blog/tags/rhombic_antenna" rel="tag">rhombic_antenna</a></li>
              <li><a href="/blog/tags/ajax" rel="tag">ajax</a></li>
              <li><a href="/blog/tags/diy_cabling" rel="tag">diy_cabling</a></li>
              <li><a href="/blog/tags/arduino_radio" rel="tag">arduino_radio</a></li>
              <li><a href="/blog/tags/windows_os" rel="tag">windows_os</a></li>
              <li><a href="/blog/tags/raspbian" rel="tag">raspbian</a></li>
              <li><a href="/blog/tags/tear_drop_trailers" rel="tag">tear_drop_trailers</a></li>
              <li><a href="/blog/tags/firefox_phone" rel="tag">firefox_phone</a></li>
              <li><a href="/blog/tags/firefox_os" rel="tag">firefox_os</a></li>
              <li><a href="/blog/tags/porch_steps_led" rel="tag">porch_steps_led</a></li>
              <li><a href="/blog/tags/fm_transmitter" rel="tag">fm_transmitter</a></li>
              <li><a href="/blog/tags/electronics" rel="tag">electronics</a></li>
              <li><a href="/blog/tags/tube_audio" rel="tag">tube_audio</a></li>
              <li><a href="/blog/tags/spam_assassin" rel="tag">spam_assassin</a></li>
              <li><a href="/blog/tags/webmail" rel="tag">webmail</a></li>
              <li><a href="/blog/tags/tv" rel="tag">tv</a></li>
              <li><a href="/blog/tags/stereo_receiver" rel="tag">stereo_receiver</a></li>
              <li><a href="/blog/tags/portable" rel="tag">portable</a></li>
              <li><a href="/blog/tags/usb" rel="tag">usb</a></li>
              <li><a href="/blog/tags/moteino_home_automation" rel="tag">moteino_home_automation</a></li>
              <li><a href="/blog/tags/radio" rel="tag">radio</a></li>
              <li><a href="/blog/tags/speaker" rel="tag">speaker</a></li>
              <li><a href="/blog/tags/coding" rel="tag">coding</a></li>
              <li><a href="/blog/tags/green_chile" rel="tag">green_chile</a></li>
              <li><a href="/blog/tags/recipe" rel="tag">recipe</a></li>
              <li><a href="/blog/tags/phusion_passenger" rel="tag">phusion_passenger</a></li>
              <li><a href="/blog/tags/moosefet" rel="tag">moosefet</a></li>
              <li><a href="/blog/tags/headphones" rel="tag">headphones</a></li>
              <li><a href="/blog/tags/hurricane_lantern" rel="tag">hurricane_lantern</a></li>
              <li><a href="/blog/tags/coax_power_plug" rel="tag">coax_power_plug</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <script src='/assets/app.js'></script>
  </body>
</html>
